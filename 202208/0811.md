# 2022/08/11

## 함수

일련의 과정을 문으로 구현하고 코드 블록으로 감싸서 하나의 실행 단위로 정의한 것

### 구조

- function 키워드
- 함수 이름
    - 생략 가능
    - 함수 몸체에서만 식별 가능(외부에서는 불가능)
    - 외부에서 참조하는 값: 함수 이름X, 함수의 식별자O
- 매개변수
    - 개수는 제한이 없으나, 가급적 적게 사용하는 것을 권장
    - 함수의 `arguments` 프로퍼티에 저장
- 함수 몸체

### 함수 리터럴(표기법)

1. 표현식인 문과 표현식이 아닌 문 모두로 해석 가능
    1. 표현식인 문으로 해석될 경우
        1. 명시적으로 변수에 담아서 선언한 경우 → 함수 표현식
    2. 표현식이 아닌 문으로 해석될 경우 → 함수 선언문
2. 해석 기준
    - 값으로 평가되어야만 하는가?
        - 꼭 값으로 평가되어야 하는 경우 → 함수 리터럴 표현식(1-a)
        - 아닌 경우 → 함수 리터럴(1-b)

### 함수를 정의하는 법

- 함수 선언문
    - 함수 이름 생략 불가능
    - 런타임 이전에 값까지 메모리에 올라감
        - 함수 호이스팅
    - 메모리에 있는 함수 객체를 식별하기 위한 식별자가 암묵적으로 생성됨
        - 식별자는 함수 객체를 가리키는 참조값을 가짐
- 함수 표현식
    - 함수 리터럴을 명시적으로 변수에 담도록 선언하는 것
    - 런타임 이전에 식별자(변수)만 초기화 됨
        - 변수 호이스팅
    - 호이스팅으로 인한 부수효과를 방지하기 위하여, 선언문보다 표현식을 사용하도록 권장함
- 생성자 함수 사용
    
    ```jsx
    // 매개변수와 함수본문은 문자열로 입력
    var add = new Function(...매개변수, 함수본문);
    
    ```
    
- 화살표 함수
    - 함수 이름을 사용하지 않음
    - prototype이 없는 등 생성 원리와 내부 구조가 다름
    

### 함수 선언문과 함수 표현식의 차이

- 생성 시점이 다르다
    - 함수 선언문의 생성이 더 빠름
    - 선언 과정에서 호이스팅 방법이 다르기 때문
        - 함수 선언문 → 함수 호이스팅
            - 함수 객체가 값으로 할당되며 호이스팅
        - 함수 표현식 → 변수 호이스팅
            - 함수 객체를 가리키는 식별자만 호이스팅
                - 호이스팅 당시 식별자의 값은 undefined

### 외부 상태와의 관계

외부 상태에 의존하지 않고, 변화를 주지도 않는 것이 가장 이상적이다

- 부수효과 예방
- 의존&변경
    - 원시값
        - 매개변수를 통해 받아온 인자를 조작하면 부수효과X
    - 객체
        - 매개변수를 통해 받아오더라도, 부수효과 발생에 유의해야 함
            - 얕은 복사로 가져온 경우 원본 객체를 변경시킬 수 있음

### 함수의 형태

- 즉시 실행 함수(IIFE)
    - 개념
        - 함수를 생성하는 동시에 실행한다
    - 특징
        - 식별자를 갖지 않아 재사용이 불가능하다
    - 사용 이유
        - 클로저를 생성하기 위해
            - 외부함수를 IIFE로 사용하고 내부함수를 반환하여, 반환된 내부 함수를 사용
        - 전역 변수의 오염을 방지하기 위해
            - ES6 이후 module 시스템을 활용하면 더 깔끔하고 쉽게 해결 가능
- 재귀 함수
    - 개념
        - 자기 자신을 호출하는 함수
    - 특징
        - 탈출조건을 잘 처리해야 함
    - 사용 이유
        - 반복되는 처리를 위해
        - 반복문을 사용하는 것보다 가독성이 좋을 때
- 중첩 함수
    - 개념
        - 함수 내부에 정의된 함수
    - 역할
        - 외부 함수를 돕는 helper
        - 클로저
- 콜백 함수
    - 개념
        - 콜백 함수: 매개 변수를 통해 다른 함수의 내부로 들어가는 함수
            - 일반적으로 매개 변수를 통해 들어가는 함수를 콜백 함수로 총칭
            - 엄밀히 따지면, 해당 함수를 실행하는 주체가 고차 함수가 아닐 경우 콜백 함수라고 할 수 없음
        - 고차 함수: 콜백 함수를 전달받아 사용하는 함수
            - 필요한 시점에 콜백 함수를 호출하여 사용
    - 사용 이유
        - 공통 로직을 분리하여 재사용하기 위해
            
            ```jsx
            var arr = [1,2,3,4,29,4,12,3,,8,7,5];
            
            // 콜백 함수를 분리하여 재사용성 높임 -> 오름차순/내림차순 함수가 따로 존재하지 않는 이유
            
            arr.sort((a,b) => a - b);
            
            arr.sort((a,b) => b - a);
            ```
            
    
- 순수함수
    - 개념
        - 외부 상태를 의존하지도, 변경하지도 않는 함수 → 부수 효과가 없음
        - 외부상태
            - 전역 변수, DOM, Console, 서버 데이터, 파일 등
        - 부수 효과
            - 함수가 수행해야 하는 일 이외에 부수적으로 실행하는 일
                - 가독성을 떨어뜨림
                - 의도지 않은 버그를 발생시킬 수 있음
    - 특징
        - 동일한 값을 인수로 받으면 항상 동일한 값을 반환
        - 완벽한 순수함수를 만드는 것은 어려움
        - 함수형 프로그래밍을 위한 기반
    - 유의할 점
        - 부수효과를 일으키는 부분과 순수한 부분을 분리하도록 노력하는 것이 포인트
            - 부수 효과를 완전히 배제하는 것은 어렵기 때문에