# 2022/08/02

## **Sass @Use** / **@forward**

### 의문의 시작

- use와 forward 모두 하위 파일의 값을 가져다 쓰는 것 같던데, 무엇이 다르고 언제
  어떤 걸 써야 할까?
- 공식문서를 살펴보니 import와 비교하며 설명하던데, 그럼 import와 use / forward
  는 뭐가 다를까?

### `CSS @import` vs `Sass @import`

- CSS import는 느리다
  - CSS import를 사용하면 브라우저 단에서 문서를 파싱하며 순차적으로 파일을 요청
    한다
    - 네트워크 통신 횟수도 많아지고, 병렬처리가 되지 않기 때문에 느림
- Sass import는 빠르다
  - Sass는 배포 이전 작업단계에서 사용하는 CSS preprocesser이기 때문에, 실제로브
    라우저가 문서를 파싱하는 단계에서 CSS파일은 하나만 존재함
  - 한 번의 통신으로 CSS전체를 가져오기 때문에 빠름

### `Sass @import`의 문제점

import를 통해 불러온 모든 변수가 global scope에 저장된다. 이에 따른 문제는

1. 변수 이름 짓기가 어려워진다
   1. 파일마다 일일이 prefix를 붙여주는 등의 방법으로 변수명이 겹치는 것을 방지
      해야 한다.
2. 의도치 않은 덮어씌우기가 발생한다
   1. 하나의 파일을 여러 곳에서 사용할 경우 불러온 모든 파일에 변수가 중복 저장
      되고, 구조가 복잡해질수록 추적이 어려워진다
      - A → B → C 로 import하면, A의 값이 C에도 저장된다
      - 위에 더하여, 추가적으로 A → D → E 로 import하면, A의 값이 E에도 저장된다
        (중복)
3. 따라서 디버깅이 어렵다
   1. 덮어씌우기는 에러 없이 발생하므로, 예상치 못한 디자인이 어디에서 비롯된 것
      인지 알기 어렵다

![@import의 변수 이동]('./../images/@import.png')

### Sass `@use` / `@forward`의 등장(Dart Sass)

### @use / @forward

Dart Sass에서는 import의 문제점을 해결하기 위해 use와 forward를 만들었다

공식 문서에서 import는 가급적 사용하지 않기를 권장한다.

- `@use`
  - @use로 가져온 값은 global scope에 저장되지 않는다. 따라서 가져온 값은 해당
    파일 내에서만 유효하다
    - A → B → C로 use하면, A값은 C에 전달되지 않는다
    - C에는 A를 활용해 새로 만든 B의 값만 전달된다

![@use의 변수 이용]('./../images/@use.png')

- `@forward`
  - @forward로 가져온 값을 현재 파일에 덮어씌운다. 해당 값들은 현재 파일에서 사
    용할 수 없으며, 이후 use나 forward로 접근이 가능하다.
    - A → B로 forward한 경우, B에는 A의 값이 저장되지만 사용할 수는 없다.
  - 중간 집결지의 역할로 유용하다
    - 프로젝트 규모가 커질수록 use로 불러와야 할 파일이 많아질 경우, 그룹 별로
      \_index.scss 파일을 통해 하위 파일을 한꺼번에 모아서 넘겨준다.
  - 변수를 깨끗하고 안전하게 쓸 수 있다
    - 원하는 순간에만 전역스코프에 변수 저장
    - 변수 덮어씌울 위험&darr;

![@forward의 변수 이용]('./../images/@forward.png')

### 결론

- `@import`는 가급적 사용하지 말자
- 다른 파일의 변수가 필요하면 `@use`로 가져와 사용하자
- 폴더 내 모듈을 통합하여 상위로 넘겨줄 때 `@forward`를 사용하자
