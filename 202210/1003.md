# 22/10/03

## CBD_SPA 라이브러리 만들기

### diff 알고리즘


### 상태관리 구조 짜기

#### 이벤트 핸들러를 어떤 방식으로 부착할까
- 하나의 요소에 달아서 위임하기
	- window, document 등
- 해당 컴포넌트에 접근해서 부착하기
	- DOMString을 노드로 바꾼 뒤 접근
- 어떤 컴포넌트에서 결정할까
	- 컨테이너 컴포넌트(Todo)
	- 하위 컴포넌트(TodoInput)

#### 상태 변화 -> 렌더링으로 이어지는 흐름을 어떻게 구조화할까
- diff파일의 역할 확대
	- 기존
		- virtualDOM과 realDOM을 비교해서 실제로 렌더링하는 `diff()`함수만 관리
	- 수정
		- `renderVirtualDOM` 함수(New)
			- createVirtualRoot 함수에서 인수로 받아오는 렌더링 함수
			- 어플리케이션의 최상단에서 DOMString을 모아 virtualDOM에 그려주는 함수
		- `createVirtualRoot` 함수
			- 렌더링 함수를 인수로 받아서 renderVirtualDOM 초기화	
			- 역할이 늘어났기 때문에 함수 이름 다시 지어야함
		- 상태로 사용할 변수를 인수로 받아 `state와` `setState`함수를 반환하는 함수 추가
			- setState
				- 새로운 state를 인수로 받아 state변수를 업데이트한 뒤 renderVirtualDOM 함수를 호출

#### 컴포넌트의 역할 범위는 어디까지?
- 컨테이너 컴포넌트와 하위 컴포넌트를 구분해서 생각해야하나?
	- 구분한다면
		- Todo 컴포넌트에서 하위 컴포넌트를 조립하고, 상태와 상태조작 함수를 관리
		- TodoInput, TodoList 등 하위 컴포넌트에서는 DOMString만 반환하기
			- 이벤트 핸들러는 여기에서 달아주는 게 맞나?
	- 구분하지 않는다면
		- 상태와 상태조작 함수를 분리한다면?
		- 모든 컴포넌트는 자신의 DOMString을 반환하고 각자의 이벤트 핸들러를 관리한다

## 지금까지 놓치고 있던 것

- 모듈(스코프) 분리 기준을 좀 더 고민하자
	- 분리할 수 있는 변수/함수인지 한 번 더 고민하자
	- Dependancy Cycle이 생긴다면 스코프를 적절하게 분리한게 맞는지 다시 고민해보자