# 22/10/03

## CBD_SPA 라이브러리 만들기

### diff 알고리즘


### 상태관리 구조 짜기

#### 이벤트 핸들러를 어떤 방식으로 부착할까
-

#### 상태 변화 -> 렌더링으로 이어지는 흐름을 어떻게 구조화할까
- diff파일의 역할 확대
	- 기존
		- virtualDOM과 realDOM을 비교해서 실제로 렌더링하는 `diff()`함수만 관리
	- 수정
		- `renderVirtualDOM` 함수(New)
			- createVirtualRoot 함수에서 인수로 받아오는 렌더링 함수
			- 어플리케이션의 최상단에서 DOMString을 모아 virtualDOM에 그려주는 함수
		- `createVirtualRoot` 함수(Update)
			- 렌더링 함수를 인수로 받아서 renderVirtualDOM 초기화	
			- 역할이 늘어났기 때문에 함수 이름 다시 지어야함
		- `createState` 함수(New)
			- 상태로 사용할 변수를 인수로 받아 `state와` `setState`함수를 반환하는 함수
			- setState 함수
				- 새로운 state를 인수로 받아 state변수를 업데이트한 뒤 renderVirtualDOM 함수를 호출
				- 컴포넌트의 계층과 관계없이 전체 앱을 다시 그릴 수 있도록 함


## 지금까지 놓치고 있던 것

- 모듈(스코프) 분리 기준을 좀 더 고민하자
	- 분리할 수 있는 변수/함수인지 한 번 더 고민하자
	- Dependancy Cycle이 생긴다면 스코프를 적절하게 분리한게 맞는지 다시 고민해보자