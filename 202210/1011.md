# 22/10/11

## 오늘 고민한 것

### 조짜조 - 팀 프로젝트

#### SPA 라우팅

- 라우팅 관리 방법으로 어떤 게 좋을까?
	- 한 페이지에서 다 관리하기
	- 세부 라우팅은 세부 페이지에서 관리하기
- 인증 여부에 따른 라우팅 처리는 어떤 방법으로 할까?
	- 페이지의 성격(public / private)에 따라 걸러줄 수 있는 중간 컴포넌트를 만들어서 가로챈다?

```jsx
//1번

class PublicPage{
	constructor(){
		super();
		if(isLoggedin){
			history.pushState(null, null, '/');
			render();
		}
	}
}


class PrivatePage{
	constructor(){
		super();
		if(!isLoggedin){
			history.pushState(null, null, '/login');
			render();
		}
	}
}

// 2번

  

const routes = [
  { path: '/', component: Home, openedTo: '로그인' },
  { path: '/service', component: Service, openedTo: '게스트', redirectionPath: '/' },
  { path: '/about', component: About },
];

const publicPath = ['/', '/service', '/about'];

= async path => {
  const _path = path ?? window.location.pathname;
  
  try {
    const {component, openedTo, redirectionPath} = routes.find(route => route.path === _path)?.component || NotFound;

    if(openedTo === '로그인' && !로그인상태 || openedTo === '게스트' && 로그인상태){
      history.pushState(null,null,redirectionPath);
      const redirectionComponent = routes.find(redirectionPath);
      $root.replaceChildren(await redirectionComponent());
    } else{
      $root.replaceChildren(await component());
    }
  } catch (err) {
    console.error(err);
  }
};

// 3번


```


