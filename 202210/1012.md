# 22/10/12

## 오늘 고민한 것

### 조짜조 - 팀 프로젝트

#### 초기 상태를 어떻게 불러오지?

- 어느 타이밍에 불러올까?
	1. 어느 페이지든 접속하면 불러온다
		- 코드는 좀 더 간결한데, 의미상 부적절한 것 같다
	2. 메인 페이지 중 하나에 진입 시 불러온다
		- 인트로/로그인/회원가입페이지를 제외한 나머지 페이지

- 기본 상태를 가지느냐 VS 유저 타입 선택 전까지 상태를 가지지 않느냐
	- localStorage의 상태를 기본값으로 본다면?
		- 일단 localStorage의 값을 상태로 가지고, 로그인 한 경우에만 서버에서 가져와서 갱신한다
	- 기본값은 없고, 게스트인지 멤버인지 선택한 후에 상태를 불러온다

- 게스트도 회원인가? 게스트를 선택하는 것도 로그인으로 보는가?
	- 회원이 아니라면?
		- 게스트가 기본값이다
		- 게스트로 시작한 사람은 인트로 페이지에 재진입할 수 있다
		- 게스트가 기본값이지만, 상태는 필요한 페이지에서 가져온다
	- 회원이라면?
		- userType을 비회원/게스트/멤버 셋으로 나눈다
		- 인트로 페이지에는 비회원만 접근 가능하다
			- 어떤 회원으로 사용할 것인지를 선택하는 페이지이기 때문에, 이미 회원인 상태에서 접근하는 것이 적절하지 않다고 판단
		- 게스트와 멤버 모두 JWT로 로그인 세션을 관리한다.
			- 세션이 유지되는 동안에는 페이지에 재접속해도 로그인 상태가 유지된다
				- 새로고침, 주소창에 직접 입력 등
			- 세션이 만료된 경우 다시 비회원 상태로 돌아간다
		- 페이지 재진입 시 서버에서 받아온 로그인상태를 기반으로 앱을 렌더링한다